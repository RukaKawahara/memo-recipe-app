# データベースマイグレーション手順

## 新規データベース作成の場合

新しくデータベースを作成する場合は、`supabase-setup.sql` を実行してください。
このファイルには最新の機能がすべて含まれています。

```sql
-- supabase-setup.sql を実行
```

## 既存データベースのアップグレードの場合

既存のデータベースを最新バージョンにアップグレードする場合は、`migration-complete.sql` を実行してください。

```sql
-- migration-complete.sql を実行
```

### マイグレーション内容

このマイグレーションにより以下の機能が追加されます：

1. **ジャンル配列サポート** - 複数ジャンルの選択が可能
2. **カスタムジャンル管理** - ユーザーが独自ジャンルを作成・管理
3. **お気に入り機能** - レシピをお気に入りに登録
4. **参考リンク機能** - レシピに参考URLを追加

### 注意事項

- マイグレーションは安全に設計されており、既存のデータを保護します
- `IF NOT EXISTS` や `ON CONFLICT` を使用して重複実行を防止
- 既存のデータは自動的に新しい形式に変換されます

### ファイル説明

- `supabase-setup.sql` - 新規データベース用の完全セットアップ
- `migration-complete.sql` - 既存データベース用のマイグレーション
- `DATABASE_MIGRATION.md` - このファイル（マイグレーション手順）
